-- MySQL Script generated by MySQL Workbench
-- mar. 18 sept. 2018 15:27:22 CEST
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema epicerie_simplon
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema epicerie_simplon
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `epicerie_simplon` DEFAULT CHARACTER SET utf8 ;
USE `epicerie_simplon` ;

-- -----------------------------------------------------
-- Table `epicerie_simplon`.`Category`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `epicerie_simplon`.`Category` (
  `idCategory` INT NOT NULL,
  `name` VARCHAR(45) NULL,
  `description` VARCHAR(45) NULL,
  PRIMARY KEY (`idCategory`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `epicerie_simplon`.`Product`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `epicerie_simplon`.`Product` (
  `idProduct` INT NOT NULL,
  `name` VARCHAR(45) NULL,
  `buying_price` FLOAT NULL,
  `selling_price` FLOAT NULL,
  `Category_idCategory` INT NOT NULL,
  `description` VARCHAR(45) NULL,
  PRIMARY KEY (`idProduct`, `Category_idCategory`),
  INDEX `fk_Product_Category1_idx` (`Category_idCategory` ASC),
  CONSTRAINT `fk_Product_Category1`
    FOREIGN KEY (`Category_idCategory`)
    REFERENCES `epicerie_simplon`.`Category` (`idCategory`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `epicerie_simplon`.`Provider`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `epicerie_simplon`.`Provider` (
  `idProvider` INT NOT NULL,
  `name` VARCHAR(45) NULL,
  `adress` VARCHAR(45) NULL,
  `phone` VARCHAR(45) NULL,
  `email` VARCHAR(45) NULL,
  PRIMARY KEY (`idProvider`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `epicerie_simplon`.`type_of_movement`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `epicerie_simplon`.`type_of_movement` (
  `idtype_of_movement` INT NOT NULL,
  `name` VARCHAR(45) NULL,
  PRIMARY KEY (`idtype_of_movement`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `epicerie_simplon`.`type_of_direction`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `epicerie_simplon`.`type_of_direction` (
  `idtype_of_direction` INT NOT NULL,
  `name` VARCHAR(45) NULL,
  PRIMARY KEY (`idtype_of_direction`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `epicerie_simplon`.`Movement`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `epicerie_simplon`.`Movement` (
  `idMovement` INT NOT NULL,
  `quantity` INT NULL,
  `timestamp` DATE NULL,
  `Product_idProduct` INT NOT NULL,
  `type_of_movement_idtype_of_movement` INT NOT NULL,
  `type_of_direction_idtype_of_direction` INT NOT NULL,
  PRIMARY KEY (`idMovement`, `Product_idProduct`, `type_of_movement_idtype_of_movement`, `type_of_direction_idtype_of_direction`),
  INDEX `fk_Movement_Product1_idx` (`Product_idProduct` ASC),
  INDEX `fk_Movement_type_of_movement1_idx` (`type_of_movement_idtype_of_movement` ASC),
  INDEX `fk_Movement_type_of_direction1_idx` (`type_of_direction_idtype_of_direction` ASC),
  CONSTRAINT `fk_Movement_Product1`
    FOREIGN KEY (`Product_idProduct`)
    REFERENCES `epicerie_simplon`.`Product` (`idProduct`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Movement_type_of_movement1`
    FOREIGN KEY (`type_of_movement_idtype_of_movement`)
    REFERENCES `epicerie_simplon`.`type_of_movement` (`idtype_of_movement`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Movement_type_of_direction1`
    FOREIGN KEY (`type_of_direction_idtype_of_direction`)
    REFERENCES `epicerie_simplon`.`type_of_direction` (`idtype_of_direction`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `epicerie_simplon`.`Purchase`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `epicerie_simplon`.`Purchase` (
  `idPurchase` INT NOT NULL,
  `Movement_idMovement` INT NOT NULL,
  `Provider_idProvider` INT NOT NULL,
  PRIMARY KEY (`idPurchase`, `Movement_idMovement`, `Provider_idProvider`),
  INDEX `fk_Purchase_Movement1_idx` (`Movement_idMovement` ASC),
  INDEX `fk_Purchase_Provider1_idx` (`Provider_idProvider` ASC),
  CONSTRAINT `fk_Purchase_Movement1`
    FOREIGN KEY (`Movement_idMovement`)
    REFERENCES `epicerie_simplon`.`Movement` (`idMovement`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Purchase_Provider1`
    FOREIGN KEY (`Provider_idProvider`)
    REFERENCES `epicerie_simplon`.`Provider` (`idProvider`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `epicerie_simplon`.`Sale`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `epicerie_simplon`.`Sale` (
  `idSale` INT NOT NULL,
  `Movement_idMovement` INT NOT NULL,
  PRIMARY KEY (`idSale`, `Movement_idMovement`),
  INDEX `fk_Sale_Movement1_idx` (`Movement_idMovement` ASC),
  CONSTRAINT `fk_Sale_Movement1`
    FOREIGN KEY (`Movement_idMovement`)
    REFERENCES `epicerie_simplon`.`Movement` (`idMovement`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `epicerie_simplon`.`Unit`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `epicerie_simplon`.`Unit` (
  `idUnit` INT NOT NULL,
  `name` VARCHAR(45) NULL,
  PRIMARY KEY (`idUnit`))
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
